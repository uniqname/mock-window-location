{"version":3,"file":"index.js","sources":["../index.js"],"sourcesContent":["const { compose, negate } = require('./util.js')\n\nlet location = {\n  protocol: 'file:',\n  host: '',\n  hostname: '',\n  port: '',\n  pathname: '',\n  search: '',\n  hash: '',\n  // username: '',\n  // password: '',\n }\n\n const PROTOCOL = /^(\\w*:)\\/\\//\n const HOSTNAME = /^([^\\/]+\\.[^\\/]+)\\/*?/\n const PATHNAME = /^.+\\/{2}(?:[^/]*)(.*)[?#].*$/\n\nexport const getProtocol = (url) => {\n  const [match, capture] = url.match(PROTOCOL) || 'file:'\n  return capture\n}\nexport const getHostname = (url) => {\n  const [match, capture] = url.replace(`${getProtocol(url)}//`, '').match(HOSTNAME)\n  return capture\n}\nexport const getHost = (url) => getHostname(url).replace(/:\\d+/, '')\nexport const getPort = (url) => {\n  const [match, capture] = getHostname(url).match(/:\\d+/)\n  return capture\n}\nexport const getPathname = (url) => {\n  const [match, capture] = url.match(PATHNAME)\n  return capture\n}\n\nexport const parseLocation = (url) => ({\n  protocol: getProtocol(url),\n  host: getHost(url),\n  hostname: getHostname(url),\n  port: getPort(url),\n  pathname: getPathname(url),\n  search: getSearch(url),\n  hash: getHash(url),\n  get origin() { this.href },\n  get href() { `${this.protocol}//${this.host}${this.pathname}` }\n })\n \nconst assign = (url) => { location = parseLocation(url) }\nconst reload = noop\nconst replace = assign\nconst noop = ()=>{}\n\nlet href = ''\n\nObject.defineProperties(global, location, {\n  href: {\n    get() { return location.href },\n    set(newHref) { location = parseLocation(newHref) },\n    enumerable: true\n  },\n  protocol: {\n    get() { location.protocol },\n    set() { noop },\n    enumerable: true\n  },\n  host: {\n    get() { location.host },\n    set() { noop },\n    enumerable: true\n  },\n  hostname: {\n    get() { location.hostname },\n    set() { noop },\n    enumerable: true\n  },\n  port: {\n    get() { location.port },\n    set() { noop },\n    enumerable: true\n  },\n  pathname: {\n    get() { location.pathname },\n    set() { noop },\n    enumerable: true\n  },\n  search: {\n    get() { location.search },\n    set() { noop },\n    enumerable: true\n  },\n  hash: {\n    get() { location.hash },\n    set() { noop },\n    enumerable: true\n  },\n\n})"],"names":["require","compose","negate","location","PROTOCOL","HOSTNAME","PATHNAME","getProtocol","url","match","capture","getHostname","replace","getHost","getPort","getPathname","parseLocation","getSearch","getHash","origin","href","protocol","host","pathname","noop","Object","defineProperties","global","newHref","hostname","port","search","hash"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAA4BA,QAAQ,WAAR;IAApBC,mBAAAA;IAASC,kBAAAA;;AAEjB,IAAIC,WAAW;YACH,OADG;QAEP,EAFO;YAGH,EAHG;QAIP,EAJO;YAKH,EALG;UAML,EANK;QAOP;;;CAPR;;AAYC,IAAMC,WAAW,aAAjB;AACA,IAAMC,WAAW,uBAAjB;AACA,IAAMC,WAAW,8BAAjB;;AAED,AAAO,IAAMC,cAAc,SAAdA,WAAc,CAACC,GAAD,EAAS;aACTA,IAAIC,KAAJ,CAAUL,QAAV,KAAuB,OADd;;MAC3BK,KAD2B;MACpBC,OADoB;;SAE3BA,OAAP;CAFK;AAIP,AAAO,IAAMC,cAAc,SAAdA,WAAc,CAACH,GAAD,EAAS;2BACTA,IAAII,OAAJ,CAAeL,YAAYC,GAAZ,CAAf,SAAqC,EAArC,EAAyCC,KAAzC,CAA+CJ,QAA/C,CADS;;MAC3BI,KAD2B;MACpBC,OADoB;;SAE3BA,OAAP;CAFK;AAIP,AAAO,IAAMG,UAAU,SAAVA,OAAU,CAACL,GAAD;SAASG,YAAYH,GAAZ,EAAiBI,OAAjB,CAAyB,MAAzB,EAAiC,EAAjC,CAAT;CAAhB;AACP,AAAO,IAAME,UAAU,SAAVA,OAAU,CAACN,GAAD,EAAS;2BACLG,YAAYH,GAAZ,EAAiBC,KAAjB,CAAuB,MAAvB,CADK;;MACvBA,KADuB;MAChBC,OADgB;;SAEvBA,OAAP;CAFK;AAIP,AAAO,IAAMK,cAAc,SAAdA,WAAc,CAACP,GAAD,EAAS;mBACTA,IAAIC,KAAJ,CAAUH,QAAV,CADS;;MAC3BG,KAD2B;MACpBC,OADoB;;SAE3BA,OAAP;CAFK;;AAKP,AAAO,IAAMM,gBAAgB,SAAhBA,aAAgB,CAACR,GAAD;SAAU;cAC3BD,YAAYC,GAAZ,CAD2B;UAE/BK,QAAQL,GAAR,CAF+B;cAG3BG,YAAYH,GAAZ,CAH2B;UAI/BM,QAAQN,GAAR,CAJ+B;cAK3BO,YAAYP,GAAZ,CAL2B;YAM7BS,UAAUT,GAAV,CAN6B;UAO/BU,QAAQV,GAAR,CAP+B;QAQjCW,MAAJ,GAAa;WAAOC,IAAL;KARsB;QASjCA,IAAJ,GAAW;WAAUC,QAAR,UAAqB,KAAKC,IAA1B,GAAiC,KAAKC,QAAtC;;GATc;CAAtB;;AAYP,AACA,AACA,AACA,IAAMC,OAAO,SAAPA,IAAO,GAAI,EAAjB;;AAEA,AAEAC,OAAOC,gBAAP,CAAwBC,MAAxB,EAAgCxB,QAAhC,EAA0C;QAClC;OAAA,oBACE;aAASA,SAASiB,IAAhB;KADJ;OAAA,kBAEAQ,OAFA,EAES;iBAAaZ,cAAcY,OAAd,CAAX;KAFX;;gBAGQ;GAJ0B;YAM9B;OAAA,oBACF;eAAWP,QAAT;KADA;OAAA,oBAEF;;KAFE;;gBAGI;GAT0B;QAWlC;OAAA,oBACE;eAAWC,IAAT;KADJ;OAAA,oBAEE;;KAFF;;gBAGQ;GAd0B;YAgB9B;OAAA,oBACF;eAAWO,QAAT;KADA;OAAA,oBAEF;;KAFE;;gBAGI;GAnB0B;QAqBlC;OAAA,oBACE;eAAWC,IAAT;KADJ;OAAA,oBAEE;;KAFF;;gBAGQ;GAxB0B;YA0B9B;OAAA,oBACF;eAAWP,QAAT;KADA;OAAA,oBAEF;;KAFE;;gBAGI;GA7B0B;UA+BhC;OAAA,oBACA;eAAWQ,MAAT;KADF;OAAA,oBAEA;;KAFA;;gBAGM;GAlC0B;QAoClC;OAAA,oBACE;eAAWC,IAAT;KADJ;OAAA,oBAEE;;KAFF;;gBAGQ;;;CAvChB;;;;;;;"}